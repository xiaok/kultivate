|.arch x64
|.actionlist actions

#define Dst &state

extern void initjit(dasm_State **state, const void *actionlist);
extern void *jitcode(dasm_State **state);
extern void free_jitcode(void *code);

static int test(int num){
    dasm_State *state;
    initjit(&state, actions);
    |  mov eax, num
    |  ret

    int (*fptr)() = jitcode(&state);
    int ret = fptr();
    return ret;
}

int main(int argc, char *argv[]){
    return test(2);
}
